<?xml version="1.0" encoding="UTF-8"?>
<operation id="ba185bbd-8b1a-4694-bc94-f1c36db6b7a7">
  <descriptionCdata><![CDATA[ba185bbd-8b1a-4694-bc94-f1c36db6b7a7.description=This trims values from a list.  The values trimmed are equally distributed from the high and low ends of the list.  The number of elements trimmed is dictated by the percentage that is passed in.  If the percentage would indicate an odd number of elements the number trimmed is lowered by one so that the same number are taken from both ends.\n\nDeprecated in favor of operation with the same name.\n\nInputs\:\n\nlist\: a sorted list of numbers\ndelimiter\: the list delimiter\npct\: the percentage of elements to trim\n\nResult\: \nThe trimmed list separated by the same delimiter\n\nResponses\:\nsuccess - if we trimmed the list\nfailure - if the list was empty or an entry was not a number
]]></descriptionCdata>
  <annotation>ba185bbd-8b1a-4694-bc94-f1c36db6b7a7.description</annotation>
  <name>Trim List</name>
  <categories/>
  <inputs>
    <userInputBinding id="a7240cbc-0800-4cec-9455-a1e3c7d0dc69">
      <annotation></annotation>
      <assignFromContext>false</assignFromContext>
      <assignToContext>false</assignToContext>
      <inputType>STRING</inputType>
      <isList>false</isList>
      <required>true</required>
      <isPersisted>true</isPersisted>
      <inputSymbol>list</inputSymbol>
      <listDelimiter>,</listDelimiter>
      <record>false</record>
      <prompt></prompt>
      <isMultiSelect>false</isMultiSelect>
      <sourceDelimiter>|</sourceDelimiter>
    </userInputBinding>
    <userInputBinding id="8bab61d1-e06b-4f2f-90b2-959aca6d45bc">
      <annotation></annotation>
      <assignFromContext>false</assignFromContext>
      <assignToContext>false</assignToContext>
      <inputType>STRING</inputType>
      <isList>false</isList>
      <required>true</required>
      <isPersisted>true</isPersisted>
      <inputSymbol>delimiter</inputSymbol>
      <listDelimiter>,</listDelimiter>
      <record>false</record>
      <prompt></prompt>
      <isMultiSelect>false</isMultiSelect>
      <sourceDelimiter>|</sourceDelimiter>
    </userInputBinding>
    <userInputBinding id="8eebc459-2050-458c-b615-0d015e2be31b">
      <annotation></annotation>
      <assignFromContext>false</assignFromContext>
      <assignToContext>false</assignToContext>
      <inputType>STRING</inputType>
      <isList>false</isList>
      <required>true</required>
      <isPersisted>true</isPersisted>
      <inputSymbol>pct</inputSymbol>
      <listDelimiter>,</listDelimiter>
      <record>false</record>
      <prompt></prompt>
      <isMultiSelect>false</isMultiSelect>
      <sourceDelimiter>|</sourceDelimiter>
    </userInputBinding>
    <staticBinding id="754441b2-6347-43d9-9567-b1fb45b7a9c1">
      <annotation></annotation>
      <toContextKey></toContextKey>
      <fromContextKey></fromContextKey>
      <assignFromContext>false</assignFromContext>
      <assignToContext>false</assignToContext>
      <inputType>STRING</inputType>
      <recordKey></recordKey>
      <isList>false</isList>
      <required>false</required>
      <isPersisted>true</isPersisted>
      <inputSymbol>Field_1</inputSymbol>
      <listDelimiter></listDelimiter>
      <value>${list}</value>
      <record>false</record>
    </staticBinding>
    <staticBinding id="3fdfcabb-00de-425a-9247-075c7d12f1ba">
      <annotation></annotation>
      <toContextKey></toContextKey>
      <fromContextKey></fromContextKey>
      <assignFromContext>false</assignFromContext>
      <assignToContext>false</assignToContext>
      <inputType>STRING</inputType>
      <recordKey></recordKey>
      <isList>false</isList>
      <required>false</required>
      <isPersisted>true</isPersisted>
      <inputSymbol>Field_2</inputSymbol>
      <listDelimiter></listDelimiter>
      <value>${delimiter}</value>
      <record>false</record>
    </staticBinding>
    <staticBinding id="e4ea87f1-5b9e-40e8-a1e3-9465eb7529ce">
      <annotation></annotation>
      <toContextKey></toContextKey>
      <fromContextKey></fromContextKey>
      <assignFromContext>false</assignFromContext>
      <assignToContext>false</assignToContext>
      <inputType>STRING</inputType>
      <recordKey></recordKey>
      <isList>false</isList>
      <required>false</required>
      <isPersisted>true</isPersisted>
      <inputSymbol>Field_3</inputSymbol>
      <listDelimiter></listDelimiter>
      <value>${pct}</value>
      <record>false</record>
    </staticBinding>
  </inputs>
  <scriptlet id="de08e041-5b33-4eef-b5c1-337350954729">
    <annotation></annotation>
    <name>Operation Trim List (76955ec9-f332-45dd-a48d-0014d027cef3)</name>
    <script>scriptletResult = &quot;&quot;;
scriptletResponse = &quot;failure&quot;;

// parse the list
items = list.split(delimiter);
nums = new Array;

// turn it into an arry of numbers for efficiency
total = strToNum(items,nums);

if (total != 0) {

   // how many elements do we need to trim?
   trim = java.lang.Math.rint(total * (parseInt(pct)/100));

   // if it is odd make it even;
   if (trim % 2 == 1) trim--;

   // now divide it by two since that is where we will start in the list...
   trim /= 2;

   // and we will end that many before the end...
   total -= trim;

  // now create a new list
   for (i = trim; i &lt; total; i++) {
      if (i != trim) scriptletResult += delimiter;
      scriptletResult += nums[i];
   }
}

scriptletResponse = &quot;success&quot;;

function sortNumber(a,b) {
   return (a - b);
}

function strToNum(items,nums) {
   error = &quot;false&quot;;
   for (total = 0; total &lt; 1000; total++) {
      if (items[total] == null) break;
      if (items[total].match(/[^0-9.]/)) {
         error = &quot;true&quot;;
         break;
      }
      nums[total] = java.lang.Double.parseDouble(items[total]);
   }
   if (error == &quot;true&quot;) return 0;
   return total;
}
</script>
    <type>RHINO</type>
  </scriptlet>
  <possibleResponses>
    <opResponse id="8769e980-15a4-471f-b137-d8fbc346e61b">
      <annotation></annotation>
      <name>success</name>
      <isDefault>true</isDefault>
      <onFailure>false</onFailure>
      <type>RESOLVED</type>
      <matchRules/>
    </opResponse>
    <opResponse id="2e2ffe95-982a-44ce-83cd-f5b0f19e2879">
      <annotation></annotation>
      <name>failure</name>
      <isDefault>false</isDefault>
      <onFailure>true</onFailure>
      <type>ERROR</type>
      <matchRules/>
    </opResponse>
  </possibleResponses>
  <availableResultExpressions/>
  <resultExpression id="b85fed17-9269-4863-aaba-00173fee89cb">
    <annotation></annotation>
    <name>Field 1</name>
    <fieldName>Field_1</fieldName>
    <sourceType>RAWRESULT</sourceType>
    <filters/>
  </resultExpression>
  <iconSpec id="efb14b35-10cd-4133-8058-10ac1be75b8f">
    <baseIcon>jar.png</baseIcon>
    <basePath>Others/</basePath>
    <readOnly>false</readOnly>
    <layers>
      <iconSpec id="a8fb8c02-7ee5-4799-bd5b-476ba160e8d4">
        <baseIcon>cut.png</baseIcon>
        <basePath>Annotations/</basePath>
        <readOnly>false</readOnly>
        <layers/>
      </iconSpec>
    </layers>
  </iconSpec>
  <opRef>
    <refId>ddd79f22-8b1e-4605-88d5-d912bb2da2b9</refId>
  </opRef>
  <fieldValues/>
  <groupAliasRef>
    <refId>5233030c-af46-432b-a682-b326ca6bf2ae</refId>
    <refName>RAS_Operator_Path</refName>
  </groupAliasRef>
  <overrideGroupAlias>${overrideJRAS}</overrideGroupAlias>
</operation>